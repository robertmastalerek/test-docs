<!doctype html><html class=no-js><head><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://ssgtm.camunda.org/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PP9MHKW');</script><meta charset=utf-8><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width"><meta name=description content="documentation of Camunda 7"><meta name=keywords content="camunda,open source,free,Apache License,Apache 2.0,workflow,BPMN,BPMN 2.0,camunda.org,bpm,BPMS,engine,platform,process,automation,community,documentation"><meta name=author content="Camunda 7 community"><meta name=robots content=noindex><title>Process Instance Migration | docs.camunda.org</title><meta name=generator content="Hugo 0.54.0"><link rel="shortcut icon" href=https://robertmastalerek.github.io/img/favicon.ico type=image/x-icon><link rel=stylesheet href=https://robertmastalerek.github.io/css/docs.91d4e2e25acd3c3694c2e139ae987708dbbd89993705dc078bc0f52d6361c7b3.css integrity="sha256-kdTi4lrNPDaUwuE5rph3CNu9iZk3BdwHi8D1LWNhx7M="><link rel=canonical href=https://robertmastalerek.github.io/https://robertmastalerek.github.io/user-guide/process-engine/process-instance-migration/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PP9MHKW" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><nav class="navbar navbar-fixed-top"><div class="navbar-container navbar-top-section"><span>Looking for Camunda 8? >></span>
<a target=_blank href=https://docs.camunda.io/>Docs</a>
<a target=_blank href="https://signup.camunda.com/accounts?utm_source=docs.camunda.org&utm_medium=referral">Create account</a>
<a target=_blank href=https://console.cloud.camunda.io/>Sign-In</a></div><div class=navbar-container><div class=navbar-header><a href=https://robertmastalerek.github.io/><img src=https://robertmastalerek.github.io/img/orange-C.png style="width:35;height:35px;padding:0 5px 7px 0">
<span class=brand-name>Camunda 7</span>
<span class=site-name>Docs</span></a></div><ul class=header-menu><li><a href=/test-docs/get-started/>Get Started</a></li><li><a href=/test-docs/>Camunda 7</a></li><li><a href=/test-docs/enterprise/>Enterprise</a></li><li><a href=/test-docs/security/>Security</a></li></ul><button class=site-menu-toggle>
<span></span><span></span><span></span></button><div class=search-field><input type=search class=search-input placeholder=Search…></div><ul class=external-menu><li class=external><a href=https://camunda.org>Camunda.org</a></li></ul></div></nav><div class=search-results><ul class=results-list></ul><footer><button class="btn btn-default page previous">
<span class="glyphicon glyphicon-chevron-left"></span></button>
<button class="search-close btn btn-default">
<span class="glyphicon glyphicon-remove"></span></button>
<button class="btn btn-default page next">
<span class="glyphicon glyphicon-chevron-right"></span></button></footer></div><div class=search-underlay></div><nav class=site-menu><div class="version versioned"><span class=number><a>develop</a>
(7.23)</span></div><ul class=site-menu-items><li><a href=/introduction/>Introduction</a><ul><li><a href=/introduction/downloading-camunda/>Download</a></li><li><a href=/introduction/licenses/>Licenses</a></li><li><a href=/introduction/implemented-standards/>Implemented Standards</a></li><li><a href=/introduction/architecture/>Architecture Overview</a></li><li><a href=/introduction/supported-environments/>Supported Environments</a></li><li><a href=/introduction/telemetry/>Telemetry</a></li><li><a href=/introduction/extensions/>Extensions</a></li><li><a href=/introduction/third-party-libraries/>Third-Party Libraries</a><ul><li><a href=/introduction/third-party-libraries/camunda-bpm-platform-license-book/>Camunda 7 License Book</a></li></ul></li><li><a href=/introduction/public-api/>Public API</a></li></ul></li><li><a href=/user-guide/>User Guide</a><ul><li><a href=/user-guide/process-engine/>Process Engine</a><ul><li><a href=/user-guide/process-engine/process-engine-bootstrapping/>Process Engine Bootstrapping</a></li><li><a href=/user-guide/process-engine/process-engine-api/>Process Engine API</a></li><li><a href=/user-guide/process-engine/process-engine-concepts/>Process Engine Concepts</a></li><li><a href=/user-guide/process-engine/variables/>Process Variables</a></li><li><a href=/user-guide/process-engine/process-instance-modification/>Process Instance Modification</a></li><li><a href=/user-guide/process-engine/process-instance-restart/>Process Instance Restart</a></li><li><a href=/user-guide/process-engine/delegation-code/>Delegation Code</a></li><li><a href=/user-guide/process-engine/expression-language/>Expression Language</a></li><li><a href=/user-guide/process-engine/scripting/>Scripting</a></li><li><a href=/user-guide/process-engine/templating/>Templating</a></li><li><a href=/user-guide/process-engine/securing-custom-code/>Custom Code &amp; Security</a></li><li><a href=/user-guide/process-engine/external-tasks/>External Tasks</a></li><li><a href=/user-guide/process-engine/connectors/>Connectors</a></li><li><a href=/user-guide/process-engine/process-versioning/>Process Versioning</a></li><li><a href=/user-guide/process-engine/process-instance-migration/>Process Instance Migration</a></li><li><a href=/user-guide/process-engine/database/>Database</a><ul><li><a href=/user-guide/process-engine/database/database-schema/>Database Schema</a></li><li><a href=/user-guide/process-engine/database/database-configuration/>Database Configuration</a></li><li><a href=/user-guide/process-engine/database/mssql-configuration/>Microsoft SQL Server and Azure SQL Database Configuration</a></li><li><a href=/user-guide/process-engine/database/mysql-configuration/>MySQL Database Configuration</a></li><li><a href=/user-guide/process-engine/database/performance/>Performance</a></li></ul></li><li><a href=/user-guide/process-engine/history/>History</a><ul><li><a href=/user-guide/process-engine/history/history-configuration/>History configuration</a></li><li><a href=/user-guide/process-engine/history/user-operation-log/>User operation log</a></li><li><a href=/user-guide/process-engine/history/history-cleanup/>History cleanup</a></li><li><a href=/user-guide/process-engine/history/custom-implementation/>Custom implementation</a></li></ul></li><li><a href=/user-guide/process-engine/deployment-cache/>Deployment Cache</a></li><li><a href=/user-guide/process-engine/password-hashing/>Password Hashing</a></li><li><a href=/user-guide/process-engine/password-policy/>Password Policy</a></li><li><a href=/user-guide/process-engine/transactions-in-processes/>Transactions in Processes</a></li><li><a href=/user-guide/process-engine/the-job-executor/>The Job Executor</a></li><li><a href=/user-guide/process-engine/multi-tenancy/>Multi-Tenancy</a></li><li><a href=/user-guide/process-engine/id-generator/>Id Generators</a></li><li><a href=/user-guide/process-engine/metrics/>Metrics</a></li><li><a href=/user-guide/process-engine/incidents/>Incidents</a></li><li><a href=/user-guide/process-engine/process-engine-plugins/>Process Engine Plugins</a></li><li><a href=/user-guide/process-engine/identity-service/>Identity Service</a></li><li><a href=/user-guide/process-engine/authorization-service/>Authorization Service</a></li><li><a href=/user-guide/process-engine/deployments/>Deployments</a></li><li><a href=/user-guide/process-engine/process-diagram-api/>Process Diagram Visualization</a></li><li><a href=/user-guide/process-engine/time-zones/>Time zones</a></li><li><a href=/user-guide/process-engine/decisions/>Decisions</a><ul><li><a href=/user-guide/process-engine/decisions/configuration/>Configuration</a></li><li><a href=/user-guide/process-engine/decisions/repository/>Repository</a></li><li><a href=/user-guide/process-engine/decisions/decision-service/>Decision Service</a></li><li><a href=/user-guide/process-engine/decisions/bpmn-cmmn/>Decisions in BPMN &amp; CMMN</a></li><li><a href=/user-guide/process-engine/decisions/history/>History</a></li></ul></li><li><a href=/user-guide/process-engine/batch/>Batch</a><ul><li><a href=/user-guide/process-engine/batch-operations/>Batch operations</a></li></ul></li><li><a href=/user-guide/process-engine/error-handling/>Error Handling</a></li><li><a href=/user-guide/process-engine/diagnostics-data/>Diagnostics data</a></li></ul></li><li><a href=/user-guide/process-applications/>Process Applications</a><ul><li><a href=/user-guide/process-applications/the-process-application-class/>The Process Application class</a></li><li><a href=/user-guide/process-applications/the-processes-xml-deployment-descriptor/>The processes.xml Deployment Descriptor</a></li><li><a href=/user-guide/process-applications/process-application-event-listeners/>Process Application Event Listeners</a></li><li><a href=/user-guide/process-applications/process-application-resources/>Process Application Resource Access</a></li><li><a href=/user-guide/process-applications/maven-archetypes/>Maven Project Templates (Archetypes)</a></li></ul></li><li><a href=/user-guide/runtime-container-integration/>Runtime Container Integration</a><ul><li><a href=/user-guide/runtime-container-integration/bpm-platform-services/>Camunda 7 Services</a></li><li><a href=/user-guide/runtime-container-integration/jndi-bindings-for-bpmn-platform-services/>JNDI Bindings for Camunda 7 Services</a></li><li><a href=/user-guide/runtime-container-integration/tomcat/>Apache Tomcat</a></li><li><a href=/user-guide/runtime-container-integration/jboss/>WildFly</a></li><li><a href=/user-guide/runtime-container-integration/job-execution-with-managed-resources/>Job Execution with Managed Resources</a></li></ul></li><li><a href=/user-guide/camunda-bpm-run/>Camunda 7 Run</a></li><li><a href=/user-guide/spring-framework-integration/>Spring Framework Integration</a><ul><li><a href=/user-guide/spring-framework-integration/configuration/>Bootstrapping</a></li><li><a href=/user-guide/spring-framework-integration/transactions/>Transactions</a></li><li><a href=/user-guide/spring-framework-integration/deployment/>Deployment</a></li><li><a href=/user-guide/spring-framework-integration/expressions/>Spring Bean Resolving</a></li><li><a href=/user-guide/spring-framework-integration/testing/>Testing</a></li></ul></li><li><a href=/user-guide/spring-boot-integration/>Spring Boot Integration</a><ul><li><a href=/user-guide/spring-boot-integration/version-compatibility/>Version Compatibility</a></li><li><a href=/user-guide/spring-boot-integration/configuration/>Configuration</a></li><li><a href=/user-guide/spring-boot-integration/rest-api/>REST API</a></li><li><a href=/user-guide/spring-boot-integration/webapps/>Web Applications</a></li><li><a href=/user-guide/spring-boot-integration/process-applications/>Process Applications</a></li><li><a href=/user-guide/spring-boot-integration/the-spring-event-bridge/>Spring Eventing Bridge</a></li><li><a href=/user-guide/spring-boot-integration/develop-and-test/>Developing and Testing</a></li><li><a href=/user-guide/spring-boot-integration/spring-security/>Spring Security OAuth2 Integration</a></li></ul></li><li><a href=/user-guide/quarkus-integration/>Quarkus Integration</a><ul><li><a href=/user-guide/quarkus-integration/version-compatibility/>Version Compatibility</a></li><li><a href=/user-guide/quarkus-integration/configuration/>Configuration</a></li><li><a href=/user-guide/quarkus-integration/cdi-integration/>Engine CDI Integration</a></li><li><a href=/user-guide/quarkus-integration/deployments/>Resource Deployments</a></li></ul></li><li><a href=/user-guide/cdi-java-ee-integration/>CDI and Java EE Integration</a><ul><li><a href=/user-guide/cdi-java-ee-integration/jta-transaction-integration/>JTA Transaction Integration</a></li><li><a href=/user-guide/cdi-java-ee-integration/expression-resolving/>Expression Resolving</a></li><li><a href=/user-guide/cdi-java-ee-integration/contextual-programming-model/>Contextual Programming Model</a></li><li><a href=/user-guide/cdi-java-ee-integration/built-in-beans/>Built-In Beans</a></li><li><a href=/user-guide/cdi-java-ee-integration/the-cdi-event-bridge/>CDI Event Bridge</a></li></ul></li><li><a href=/user-guide/testing/>Testing</a><ul><li><a href=/user-guide/testing/assert-examples/>Assert Examples</a></li></ul></li><li><a href=/user-guide/model-api/>Model API</a><ul><li><a href=/user-guide/model-api/bpmn-model-api/>BPMN Model API</a><ul><li><a href=/user-guide/model-api/bpmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/user-guide/model-api/bpmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/user-guide/model-api/bpmn-model-api/delegation-code/>Delegation Code</a></li><li><a href=/user-guide/model-api/bpmn-model-api/fluent-builder-api/>Fluent Builder API</a></li><li><a href=/user-guide/model-api/bpmn-model-api/respository-service/>Repository Service</a></li><li><a href=/user-guide/model-api/bpmn-model-api/extension-elements/>Extension Elements</a></li></ul></li><li><a href=/user-guide/model-api/cmmn-model-api/>CMMN Model API</a><ul><li><a href=/user-guide/model-api/cmmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/user-guide/model-api/cmmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/user-guide/model-api/cmmn-model-api/delegation-code/>Delegation Code</a></li><li><a href=/user-guide/model-api/cmmn-model-api/repository-service/>Repository Service</a></li><li><a href=/user-guide/model-api/cmmn-model-api/extension-elements/>Extension Elements</a></li><li><a href=/user-guide/model-api/cmmn-model-api/limitations/>Limitations</a></li></ul></li><li><a href=/user-guide/model-api/dmn-model-api/>DMN Model API</a><ul><li><a href=/user-guide/model-api/dmn-model-api/read-a-model/>Read a Model</a></li><li><a href=/user-guide/model-api/dmn-model-api/create-a-model/>Create a Model</a></li><li><a href=/user-guide/model-api/dmn-model-api/repository-service/>Repository Service</a></li><li><a href=/user-guide/model-api/dmn-model-api/extension-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/user-guide/data-formats/>Data Formats (XML, JSON, Other)</a><ul><li><a href=/user-guide/data-formats/configuring-spin-integration/>Configuring Spin Integration</a></li><li><a href=/user-guide/data-formats/data-formats-in-processes/>Data Formats in Processes</a></li><li><a href=/user-guide/data-formats/xml/>XML</a></li><li><a href=/user-guide/data-formats/json/>JSON</a></li></ul></li><li><a href=/user-guide/task-forms/>User Task Forms</a><ul><li><a href=/user-guide/task-forms/jsf-task-forms/>JSF Task Forms</a></li></ul></li><li><a href=/user-guide/dmn-engine/>DMN Engine</a><ul><li><a href=/user-guide/dmn-engine/embed/>Embed</a></li><li><a href=/user-guide/dmn-engine/evaluate-decisions/>Evaluate Decisions</a></li><li><a href=/user-guide/dmn-engine/expressions-and-scripts/>Expressions</a></li><li><a href=/user-guide/dmn-engine/feel/>FEEL Engine</a><ul><li><a href=/user-guide/dmn-engine/feel/type-handling/>Type Handling</a></li><li><a href=/user-guide/dmn-engine/feel/custom-functions/>Custom Functions</a></li><li><a href=/user-guide/dmn-engine/feel/spin-integration/>Spin Integration</a></li><li><a href=/user-guide/dmn-engine/feel/legacy-behavior/>Legacy Behavior</a></li></ul></li><li><a href=/user-guide/dmn-engine/data-types/>Data Types</a></li><li><a href=/user-guide/dmn-engine/testing/>Testing</a></li></ul></li><li><a href=/user-guide/logging/>Logging</a></li><li><a href=/user-guide/security/>Security Instructions</a></li><li><a href=/user-guide/license-use/>Camunda License Keys</a></li><li><a href=/user-guide/ext-client/>External Task Client</a><ul><li><a href=/user-guide/ext-client/spring-boot-starter/>Spring Boot Starter</a></li><li><a href=/user-guide/ext-client/compatibility-matrix/>Version Compatibility</a></li></ul></li></ul></li><li><a href=/reference/>Reference</a><ul><li><a href=/reference/rest/>REST API</a><ul><li><a href=/reference/rest/overview/>Overview</a><ul><li><a href=/reference/rest/overview/authentication/>Configure Authentication</a></li><li><a href=/reference/rest/overview/distro-use/>Usage with a Pre-Built Distribution</a></li><li><a href=/reference/rest/overview/embeddability/>Embed the API</a></li><li><a href=/reference/rest/overview/hal/>Hypertext Application Language (HAL)</a></li><li><a href=/reference/rest/overview/variables/>Variables in the REST API</a></li><li><a href=/reference/rest/overview/date-format/>Date Format</a></li></ul></li><li><a href=/reference/rest/openapi/>OpenAPI</a></li><li><a href=/reference/rest/specification/>Specification ↗</a></li></ul></li><li><a href=/reference/javadoc/>Javadoc ↗</a></li><li><a href=/reference/bpmn20/>BPMN 2.0</a><ul><li><a href=/reference/bpmn20/tasks/>Tasks</a><ul><li><a href=/reference/bpmn20/tasks/service-task/>Service Task</a></li><li><a href=/reference/bpmn20/tasks/send-task/>Send Task</a></li><li><a href=/reference/bpmn20/tasks/user-task/>User Task</a></li><li><a href=/reference/bpmn20/tasks/business-rule-task/>Business Rule Task</a></li><li><a href=/reference/bpmn20/tasks/script-task/>Script Task</a></li><li><a href=/reference/bpmn20/tasks/receive-task/>Receive Task</a></li><li><a href=/reference/bpmn20/tasks/manual-task/>Manual Task</a></li><li><a href=/reference/bpmn20/tasks/task-markers/>Task Markers</a></li></ul></li><li><a href=/reference/bpmn20/gateways/>Gateways</a><ul><li><a href=/reference/bpmn20/gateways/exclusive-gateway/>Data-based Exclusive Gateway (XOR)</a></li><li><a href=/reference/bpmn20/gateways/sequence-flow/>Conditional and Default Sequence Flows</a></li><li><a href=/reference/bpmn20/gateways/parallel-gateway/>Parallel Gateway</a></li><li><a href=/reference/bpmn20/gateways/inclusive-gateway/>Inclusive Gateway</a></li><li><a href=/reference/bpmn20/gateways/event-based-gateway/>Event-based Gateway</a></li></ul></li><li><a href=/reference/bpmn20/events/>Events</a><ul><li><a href=/reference/bpmn20/events/start-events/>Start Events</a></li><li><a href=/reference/bpmn20/events/none-events/>None Events</a></li><li><a href=/reference/bpmn20/events/message-events/>Message Events</a></li><li><a href=/reference/bpmn20/events/timer-events/>Timer Events</a></li><li><a href=/reference/bpmn20/events/error-events/>Error Events</a></li><li><a href=/reference/bpmn20/events/escalation-events/>Escalation Events</a></li><li><a href=/reference/bpmn20/events/signal-events/>Signal Events</a></li><li><a href=/reference/bpmn20/events/cancel-and-compensation-events/>Cancel and Compensation Events</a></li><li><a href=/reference/bpmn20/events/conditional-events/>Conditional Events</a></li><li><a href=/reference/bpmn20/events/link-events/>Link Events</a></li><li><a href=/reference/bpmn20/events/terminate-event/>Terminate Events</a></li></ul></li><li><a href=/reference/bpmn20/subprocesses/>Subprocess</a><ul><li><a href=/reference/bpmn20/subprocesses/embedded-subprocess/>Embedded Subprocess</a></li><li><a href=/reference/bpmn20/subprocesses/call-activity/>Call Activity</a></li><li><a href=/reference/bpmn20/subprocesses/event-subprocess/>Event Subprocess</a></li><li><a href=/reference/bpmn20/subprocesses/transaction-subprocess/>Transaction Subprocess</a></li></ul></li><li><a href=/reference/bpmn20/custom-extensions/>Extension Reference</a><ul><li><a href=/reference/bpmn20/custom-extensions/extension-elements/>Extension Elements</a></li><li><a href=/reference/bpmn20/custom-extensions/extension-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/reference/dmn/>DMN 1.3</a><ul><li><a href=/reference/dmn/decision-table/>Decision Table</a><ul><li><a href=/reference/dmn/decision-table/input/>Input</a></li><li><a href=/reference/dmn/decision-table/output/>Output</a></li><li><a href=/reference/dmn/decision-table/rule/>Rule</a></li><li><a href=/reference/dmn/decision-table/hit-policy/>Hit Policy</a></li></ul></li><li><a href=/reference/dmn/decision-literal-expression/>Decision Literal Expression</a></li><li><a href=/reference/dmn/drg/>Decision Requirements Graph</a></li><li><a href=/reference/dmn/feel/>FEEL</a><ul><li><a href=/reference/dmn/feel/legacy/>Legacy FEEL Reference</a><ul><li><a href=/reference/dmn/feel/legacy/data-types/>Data Types</a></li><li><a href=/reference/dmn/feel/legacy/language-elements/>Language Elements</a></li></ul></li></ul></li><li><a href=/reference/dmn/custom-extensions/>Extension Reference</a><ul><li><a href=/reference/dmn/custom-extensions/camunda-attributes/>Extension Attributes</a></li></ul></li></ul></li><li><a href=/reference/cmmn11/>CMMN 1.1</a><ul><li><a href=/reference/cmmn11/api/classic-vs-fluent/>Classic vs Fluent API</a></li><li><a href=/reference/cmmn11/concepts/>CMMN Concepts</a><ul><li><a href=/reference/cmmn11/concepts/plan-items/>Plan Items and Item Definitions</a></li><li><a href=/reference/cmmn11/concepts/lifecycle/>Plan Item Lifecycles</a></li><li><a href=/reference/cmmn11/concepts/entry-exit-criteria/>Entry and Exit Criteria</a></li></ul></li><li><a href=/reference/cmmn11/tasks/>Tasks</a><ul><li><a href=/reference/cmmn11/tasks/human-task/>Human Task</a></li><li><a href=/reference/cmmn11/tasks/process-task/>Process Task</a></li><li><a href=/reference/cmmn11/tasks/case-task/>Case Task</a></li><li><a href=/reference/cmmn11/tasks/decision-task/>Decision Task</a></li></ul></li><li><a href=/reference/cmmn11/grouping-tasks/>Grouping Tasks</a><ul><li><a href=/reference/cmmn11/grouping-tasks/stage/>Stage</a></li></ul></li><li><a href=/reference/cmmn11/milestone/>Milestones</a></li><li><a href=/reference/cmmn11/sentry/>Sentries</a></li><li><a href=/reference/cmmn11/markers/>Markers</a><ul><li><a href=/reference/cmmn11/markers/manual-activation-rule/>Manual Activation Rule</a></li><li><a href=/reference/cmmn11/markers/required-rule/>Required Rule</a></li><li><a href=/reference/cmmn11/markers/auto-complete/>Auto Complete</a></li><li><a href=/reference/cmmn11/markers/repetition-rule/>Repetition Rule</a></li></ul></li><li><a href=/reference/cmmn11/custom-extensions/>Extension Reference</a><ul><li><a href=/reference/cmmn11/custom-extensions/camunda-elements/>Extension Elements</a></li><li><a href=/reference/cmmn11/custom-extensions/camunda-attributes/>Extension Attributes</a></li></ul></li><li><a href=/reference/cmmn11/migration/>Migration between Specification Versions</a><ul><li><a href=/reference/cmmn11/migration/10-to-11/>1.0 to 1.1</a></li></ul></li></ul></li><li><a href=/reference/forms/>Forms</a><ul><li><a href=/reference/forms/embedded-forms/>Embedded Forms</a><ul><li><a href=/reference/forms/embedded-forms/controls/>Controls</a><ul><li><a href=/reference/forms/embedded-forms/controls/inputs/>Text Inputs</a></li><li><a href=/reference/forms/embedded-forms/controls/textarea/>Textareas</a></li><li><a href=/reference/forms/embedded-forms/controls/date-inputs/>Date Inputs</a></li><li><a href=/reference/forms/embedded-forms/controls/boolean-inputs/>Boolean Inputs</a></li><li><a href=/reference/forms/embedded-forms/controls/select/>Selects</a></li><li><a href=/reference/forms/embedded-forms/controls/hidden/>Hidden Input Fields</a></li><li><a href=/reference/forms/embedded-forms/controls/files/>File Upload and Download</a></li><li><a href=/reference/forms/embedded-forms/controls/bpmn-buttons/>BPMN Event Buttons</a></li></ul></li><li><a href=/reference/forms/embedded-forms/javascript/>Javascript</a><ul><li><a href=/reference/forms/embedded-forms/javascript/cam-script/>The cam-script Directive</a></li><li><a href=/reference/forms/embedded-forms/javascript/api/>Available API</a></li><li><a href=/reference/forms/embedded-forms/javascript/lifecycle/>Participating in the Form Lifecycle</a></li><li><a href=/reference/forms/embedded-forms/javascript/debugging/>Debugging Scripts</a></li><li><a href=/reference/forms/embedded-forms/javascript/generating-businesskey/>Generating a Business Key</a></li><li><a href=/reference/forms/embedded-forms/javascript/examples/>Examples</a></li></ul></li><li><a href=/reference/forms/embedded-forms/lifecycle/>Lifecycle and Events</a></li><li><a href=/reference/forms/embedded-forms/json-data/>Working with Json Data</a></li><li><a href=/reference/forms/embedded-forms/java-objects/>Working with Java Objects</a></li><li><a href=/reference/forms/embedded-forms/integrate/>Integrating the Forms SDK</a><ul><li><a href=/reference/forms/embedded-forms/integrate/getting-a-distribution/>Getting a Distribution</a></li><li><a href=/reference/forms/embedded-forms/integrate/bootstrapping/>Bootstrapping</a></li><li><a href=/reference/forms/embedded-forms/integrate/angular-js/>AngularJS Integration</a></li><li><a href=/reference/forms/embedded-forms/integrate/full-examples/>Full Example</a></li></ul></li></ul></li><li><a href=/reference/forms/camunda-forms/>Camunda Forms</a></li></ul></li><li><a href=/reference/spin/>Spin Dataformats</a><ul><li><a href=/reference/spin/xml/>XML</a><ul><li><a href=/reference/spin/xml/01-reading-xml/>Reading XML</a></li><li><a href=/reference/spin/xml/02-manipulating-xml/>Manipulating XML</a></li><li><a href=/reference/spin/xml/03-writing-xml/>Writing XML</a></li><li><a href=/reference/spin/xml/04-querying-xml/>Querying XML</a></li><li><a href=/reference/spin/xml/05-mapping-xml/>Mapping XML</a></li><li><a href=/reference/spin/xml/06-configuring-xml/>Configuring XML Handling</a></li></ul></li><li><a href=/reference/spin/json/>JSON</a><ul><li><a href=/reference/spin/json/01-reading-json/>Reading JSON</a></li><li><a href=/reference/spin/json/02-writing-json/>Writing JSON</a></li><li><a href=/reference/spin/json/03-querying-json/>Querying JSON</a></li><li><a href=/reference/spin/json/04-mapping-json/>Mapping JSON</a></li><li><a href=/reference/spin/json/05-configuring-json/>Configuring JSON Handling</a></li></ul></li><li><a href=/reference/spin/extending-spin/>Extending Spin</a></li></ul></li><li><a href=/reference/connect/>Connectors</a><ul><li><a href=/reference/connect/http-connector/>HTTP Connector</a></li><li><a href=/reference/connect/soap-connector/>SOAP Connector</a></li><li><a href=/reference/connect/extending-connect/>Extending Connect</a></li></ul></li><li><a href=/reference/deployment-descriptors/>Deployment Descriptors</a><ul><li><a href=/reference/deployment-descriptors/descriptors/bpm-platform-xml/>bpm-platform.xml</a></li><li><a href=/reference/deployment-descriptors/descriptors/processes-xml/>processes.xml</a></li><li><a href=/reference/deployment-descriptors/tags/>Tags</a><ul><li><a href=/reference/deployment-descriptors/tags/job-executor/>&lt;job-executor /&gt;</a></li><li><a href=/reference/deployment-descriptors/tags/process-archive/>&lt;process-archive /&gt;</a></li><li><a href=/reference/deployment-descriptors/tags/process-engine/>&lt;process-engine /&gt;</a></li></ul></li></ul></li></ul></li><li><a href=/installation/>Installation</a><ul><li><a href=/installation/camunda-modeler/>Camunda Modeler</a></li><li><a href=/installation/database-schema/>Database Schema</a></li><li><a href=/installation/camunda-bpm-run/>Remote Engine Distribution</a></li><li><a href=/installation/full/>Shared Engine Distribution</a><ul><li><a href=/installation/full/tomcat/>Tomcat</a><ul><li><a href=/installation/full/tomcat/pre-packaged/>Pre-Packaged Distribution</a></li><li><a href=/installation/full/tomcat/manual/>Manual Installation</a></li><li><a href=/installation/full/tomcat/configuration/>Configuration</a></li></ul></li><li><a href=/installation/full/jboss/>JBoss EAP/WildFly</a><ul><li><a href=/installation/full/jboss/pre-packaged/>Pre-Packaged Distribution</a></li><li><a href=/installation/full/jboss/manual/>Manual Installation</a></li><li><a href=/installation/full/jboss/configuration/>Configuration</a></li></ul></li><li><a href=/installation/full/was/>IBM WebSphere</a><ul><li><a href=/installation/full/was/manual-liberty/>Manual Installation: WebSphere Liberty</a></li><li><a href=/installation/full/was/configuration/>Configuration</a></li></ul></li><li><a href=/installation/full/wls/>Oracle WebLogic</a><ul><li><a href=/installation/full/wls/manual/>Manual Installation</a></li><li><a href=/installation/full/wls/configuration/>Configuration</a></li></ul></li></ul></li><li><a href=/installation/docker/>Docker</a></li><li><a href=/installation/standalone-webapplication/>Standalone Webapplication (.war)</a></li><li><a href=/installation/spring-boot/>Spring Boot</a></li><li><a href=/installation/karaf-osgi/>Karaf / OSGi</a></li></ul></li><li><a href=/modeler/>Modeler</a><ul><li><a href=/modeler/bpmn/>BPMN</a></li><li><a href=/modeler/dmn/>DMN</a></li><li><a href=/modeler/forms/>Forms</a></li><li><a href=/modeler/element-templates/>Element Templates</a></li></ul></li><li><a href=/webapps/>Web Applications</a><ul><li><a href=/webapps/admin/>Admin</a><ul><li><a href=/webapps/admin/user-management/>User Management</a></li><li><a href=/webapps/admin/group-management/>Group Management</a></li><li><a href=/webapps/admin/tenant-management/>Tenant Management</a></li><li><a href=/webapps/admin/authorization-management/>Authorization Management</a></li><li><a href=/webapps/admin/system-management/>System Management</a></li><li><a href=/webapps/admin/auditing/>Auditing</a></li><li><a href=/webapps/admin/configuration/>Configuration</a></li><li><a href=/webapps/admin/plugins/>Plugins</a></li></ul></li><li><a href=/webapps/cockpit/>Cockpit</a><ul><li><a href=/webapps/cockpit/dashboard/>Dashboard</a></li><li><a href=/webapps/cockpit/bpmn/>BPMN Processes</a><ul><li><a href=/webapps/cockpit/bpmn/dashboard/>Dashboard</a></li><li><a href=/webapps/cockpit/bpmn/process-definition-view/>Process Definition View</a></li><li><a href=/webapps/cockpit/bpmn/process-instance-view/>Process Instance View</a></li><li><a href=/webapps/cockpit/bpmn/process-history-views/>History</a></li><li><a href=/webapps/cockpit/bpmn/process-instance-modification/>Instance Modification</a></li><li><a href=/webapps/cockpit/bpmn/process-instance-restart/>Instance Restart</a></li><li><a href=/webapps/cockpit/bpmn/process-instance-migration/>Instance Migration</a></li><li><a href=/webapps/cockpit/bpmn/failed-jobs/>Failed Jobs</a></li><li><a href=/webapps/cockpit/bpmn/suspension/>Suspension</a></li><li><a href=/webapps/cockpit/bpmn/correlate-message/>Correlate Message</a></li><li><a href=/webapps/cockpit/bpmn/drilldown/>Collapsed Subprocesses</a></li></ul></li><li><a href=/webapps/cockpit/dmn/>DMN Decisions</a><ul><li><a href=/webapps/cockpit/dmn/dashboard/>Dashboard</a></li><li><a href=/webapps/cockpit/dmn/decision-definition-view/>Decision Definition View</a></li><li><a href=/webapps/cockpit/dmn/decision-requirements-instance-view/>Decision Requirements Definition Instance View</a></li><li><a href=/webapps/cockpit/dmn/decision-requirements-definition-view/>Decision Requirements Definition View</a></li><li><a href=/webapps/cockpit/dmn/decision-instance-view/>Decision Instance View</a></li><li><a href=/webapps/cockpit/dmn/live-editing/>Live Editing</a></li></ul></li><li><a href=/webapps/cockpit/cmmn/>CMMN Cases</a><ul><li><a href=/webapps/cockpit/cmmn/dashboard/>Dashboard</a></li><li><a href=/webapps/cockpit/cmmn/case-definition-view/>Case Definition View</a></li><li><a href=/webapps/cockpit/cmmn/case-instance-view/>Case Instance View</a></li></ul></li><li><a href=/webapps/cockpit/cleanup/>Cleanup</a></li><li><a href=/webapps/cockpit/deployment-view/>Deployments</a></li><li><a href=/webapps/cockpit/auditing/>Auditing</a></li><li><a href=/webapps/cockpit/batch/>Batch</a><ul><li><a href=/webapps/cockpit/batch/batch-operation/>Batch operation</a></li><li><a href=/webapps/cockpit/batch/monitoring/>Batch View</a></li></ul></li><li><a href=/webapps/cockpit/reporting/>Reports</a></li><li><a href=/webapps/cockpit/tasks-dashboard/>Open Tasks Dashboard</a></li><li><a href=/webapps/cockpit/extend/>Extending</a><ul><li><a href=/webapps/cockpit/extend/configuration/>Configuration</a></li><li><a href=/webapps/cockpit/extend/plugins/>Plugins</a></li></ul></li></ul></li><li><a href=/webapps/tasklist/>Tasklist</a><ul><li><a href=/webapps/tasklist/working-with-tasklist/>Working with Tasklist</a></li><li><a href=/webapps/tasklist/dashboard/>Dashboard</a></li><li><a href=/webapps/tasklist/filters/>Filters</a></li><li><a href=/webapps/tasklist/user-assignment/>User Assignment</a></li><li><a href=/webapps/tasklist/task-lifecycle/>Task Lifecycle</a></li><li><a href=/webapps/tasklist/tasklist-plugins/>Plugins</a></li><li><a href=/webapps/tasklist/configuration/>Configuration</a></li><li><a href=/webapps/tasklist/accessibility/>Accessibility</a></li></ul></li><li><a href=/webapps/welcome/>Welcome</a><ul><li><a href=/webapps/welcome/welcome-plugins/>Plugins</a></li><li><a href=/webapps/welcome/configuration/>Configuration</a></li></ul></li><li><a href=/webapps/shared-options/>Shared Configuration Options</a><ul><li><a href=/webapps/shared-options/authentication/>Authentication</a></li><li><a href=/webapps/shared-options/csrf-prevention/>CSRF Prevention</a></li><li><a href=/webapps/shared-options/cookie-security/>Cookie Security</a></li><li><a href=/webapps/shared-options/header-security/>HTTP Header Security</a></li></ul></li></ul></li><li><a href=/examples/>Examples</a></li><li><a href=/update/>Update &amp; Migration</a><ul><li><a href=/update/minor/>Minor Version Update</a><ul><li><a href=/update/minor/722-to-723/>7.22 to 7.23</a></li><li><a href=/update/minor/721-to-722/>7.21 to 7.22</a><ul><li><a href=/update/minor/721-to-722/tomcat/>Tomcat</a></li><li><a href=/update/minor/721-to-722/wls/>WebLogic</a></li><li><a href=/update/minor/721-to-722/was/>WebSphere Liberty</a></li><li><a href=/update/minor/721-to-722/jboss/>Wildfly / JBoss EAP 7</a></li></ul></li><li><a href=/update/minor/720-to-721/>7.20 to 7.21</a><ul><li><a href=/update/minor/720-to-721/tomcat/>Tomcat</a></li><li><a href=/update/minor/720-to-721/wls/>WebLogic</a></li><li><a href=/update/minor/720-to-721/was/>WebSphere Liberty</a></li><li><a href=/update/minor/720-to-721/jboss/>Wildfly / JBoss EAP 7</a></li></ul></li><li><a href=/update/minor/719-to-720/>7.19 to 7.20</a><ul><li><a href=/update/minor/719-to-720/tomcat/>Tomcat</a></li><li><a href=/update/minor/719-to-720/wls/>WebLogic</a></li><li><a href=/update/minor/719-to-720/was/>WebSphere Liberty</a></li><li><a href=/update/minor/719-to-720/jboss/>Wildfly / JBoss EAP 7</a></li></ul></li><li><a href=/update/minor/718-to-719/>7.18 to 7.19</a><ul><li><a href=/update/minor/718-to-719/tomcat/>Tomcat</a></li><li><a href=/update/minor/718-to-719/wls/>WebLogic</a></li><li><a href=/update/minor/718-to-719/was/>WebSphere</a></li><li><a href=/update/minor/718-to-719/jboss/>Wildfly / JBoss EAP 7</a></li></ul></li><li><a href=/update/minor/717-to-718/>7.17 to 7.18</a><ul><li><a href=/update/minor/717-to-718/tomcat/>Tomcat</a></li><li><a href=/update/minor/717-to-718/wls/>WebLogic</a></li><li><a href=/update/minor/717-to-718/was/>WebSphere</a></li><li><a href=/update/minor/717-to-718/jboss/>Wildfly / JBoss EAP 7</a></li></ul></li><li><a href=/update/minor/716-to-717/>7.16 to 7.17</a><ul><li><a href=/update/minor/716-to-717/jboss/>JBoss EAP 6 or Wildfly / JBoss EAP 7</a></li><li><a href=/update/minor/716-to-717/tomcat/>Tomcat</a></li><li><a href=/update/minor/716-to-717/wls/>WebLogic</a></li><li><a href=/update/minor/716-to-717/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/715-to-716/>7.15 to 7.16</a><ul><li><a href=/update/minor/715-to-716/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/715-to-716/tomcat/>Tomcat</a></li><li><a href=/update/minor/715-to-716/wls/>WebLogic</a></li><li><a href=/update/minor/715-to-716/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/714-to-715/>7.14 to 7.15</a><ul><li><a href=/update/minor/714-to-715/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/714-to-715/tomcat/>Tomcat</a></li><li><a href=/update/minor/714-to-715/wls/>WebLogic</a></li><li><a href=/update/minor/714-to-715/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/713-to-714/>7.13 to 7.14</a><ul><li><a href=/update/minor/713-to-714/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/713-to-714/tomcat/>Tomcat</a></li><li><a href=/update/minor/713-to-714/wls/>WebLogic</a></li><li><a href=/update/minor/713-to-714/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/712-to-713/>7.12 to 7.13</a><ul><li><a href=/update/minor/712-to-713/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/712-to-713/tomcat/>Tomcat</a></li><li><a href=/update/minor/712-to-713/wls/>WebLogic</a></li><li><a href=/update/minor/712-to-713/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/711-to-712/>7.11 to 7.12</a><ul><li><a href=/update/minor/711-to-712/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/711-to-712/tomcat/>Tomcat</a></li><li><a href=/update/minor/711-to-712/wls/>WebLogic</a></li><li><a href=/update/minor/711-to-712/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/710-to-711/>7.10 to 7.11</a><ul><li><a href=/update/minor/710-to-711/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/710-to-711/tomcat/>Tomcat</a></li><li><a href=/update/minor/710-to-711/wls/>WebLogic</a></li><li><a href=/update/minor/710-to-711/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/79-to-710/>7.9 to 7.10</a><ul><li><a href=/update/minor/79-to-710/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/79-to-710/tomcat/>Tomcat</a></li><li><a href=/update/minor/79-to-710/wls/>WebLogic</a></li><li><a href=/update/minor/79-to-710/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/78-to-79/>7.8 to 7.9</a><ul><li><a href=/update/minor/78-to-79/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/78-to-79/tomcat/>Tomcat</a></li><li><a href=/update/minor/78-to-79/wls/>WebLogic</a></li><li><a href=/update/minor/78-to-79/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/77-to-78/>7.7 to 7.8</a><ul><li><a href=/update/minor/77-to-78/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/77-to-78/tomcat/>Tomcat</a></li><li><a href=/update/minor/77-to-78/wls/>WebLogic</a></li><li><a href=/update/minor/77-to-78/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/76-to-77/>7.6 to 7.7</a><ul><li><a href=/update/minor/76-to-77/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/76-to-77/tomcat/>Tomcat</a></li><li><a href=/update/minor/76-to-77/webapp/>Web Application Plugins</a></li><li><a href=/update/minor/76-to-77/wls/>WebLogic</a></li><li><a href=/update/minor/76-to-77/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/75-to-76/>7.5 to 7.6</a><ul><li><a href=/update/minor/75-to-76/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/75-to-76/tomcat/>Tomcat</a></li><li><a href=/update/minor/75-to-76/webapp/>Web Application Plugins</a></li><li><a href=/update/minor/75-to-76/wls/>WebLogic</a></li><li><a href=/update/minor/75-to-76/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/74-to-75/>7.4 to 7.5</a><ul><li><a href=/update/minor/74-to-75/glassfish/>Glassfish</a></li><li><a href=/update/minor/74-to-75/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/74-to-75/tomcat/>Tomcat</a></li><li><a href=/update/minor/74-to-75/webapp/>Web Application Plugins</a></li><li><a href=/update/minor/74-to-75/wls/>WebLogic</a></li><li><a href=/update/minor/74-to-75/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/73-to-74/>7.3 to 7.4</a><ul><li><a href=/update/minor/73-to-74/glassfish/>Glassfish</a></li><li><a href=/update/minor/73-to-74/jboss/>JBoss AS/Wildfly</a></li><li><a href=/update/minor/73-to-74/tomcat/>Tomcat</a></li><li><a href=/update/minor/73-to-74/wls/>WebLogic</a></li><li><a href=/update/minor/73-to-74/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/72-to-73/>7.2 to 7.3</a><ul><li><a href=/update/minor/72-to-73/glassfish/>Glassfish</a></li><li><a href=/update/minor/72-to-73/jboss/>JBoss</a></li><li><a href=/update/minor/72-to-73/tomcat/>Tomcat</a></li><li><a href=/update/minor/72-to-73/wls/>WebLogic</a></li><li><a href=/update/minor/72-to-73/was/>WebSphere</a></li></ul></li><li><a href=/update/minor/71-to-72/>7.1 to 7.2</a><ul><li><a href=/update/minor/71-to-72/glassfish/>Glassfish</a></li><li><a href=/update/minor/71-to-72/jboss/>JBoss</a></li><li><a href=/update/minor/71-to-72/tomcat/>Tomcat</a></li><li><a href=/update/minor/71-to-72/wls/>WebLogic</a></li><li><a href=/update/minor/71-to-72/was/>Websphere</a></li></ul></li><li><a href=/update/minor/70-to-71/>7.0 to 7.1</a></li></ul></li><li><a href=/update/spring-boot-starter/>Spring Boot Starter Migration and Update</a><ul><li><a href=/update/spring-boot-starter/migration-22-23/>2.2.0 to 2.3.0</a></li><li><a href=/update/spring-boot-starter/migration-23-30/>2.3.0 to 3.0.0</a></li><li><a href=/update/spring-boot-starter/migration-31-32/>3.1.0 to 3.2.0</a></li><li><a href=/update/spring-boot-starter/migration-33-34/>3.3.0 to 3.4.0</a></li><li><a href=/update/spring-boot-starter/migration-34-713/>3.4.0 to 7.13.0</a></li></ul></li><li><a href=/update/ce-to-ee/>Migrating from Community to Enterprise Edition</a></li><li><a href=/update/patch-level/>Patch Level Update</a></li><li><a href=/update/rolling-update/>Rolling Update</a></li><li><a href=/update/activiti/>Activiti Migration</a></li></ul></li></ul><div class=meta><h4 class=header><span class="toggle glyphicon glyphicon-chevron-up"></span>Options</h4><div class=content><label for=version-select>Version:</label>
<select id=version-select data-basepath=/manual base-url=https://robertmastalerek.github.io/>
<option>latest</option>
<option>7.22</option>
<option>7.21</option>
<option>7.20</option>
<option>7.19</option>
<option>7.18</option>
<option>7.17</option>
<option>7.16</option>
<option>7.15</option>
<option>7.14</option>
<option>7.13</option>
<option>7.12</option>
<option>7.11</option>
<option>7.10</option>
<option>7.9</option>
<option>7.8</option>
<option>7.7</option>
<option>7.6</option>
<option>7.5</option>
<option>7.4</option>
<option>7.3</option>
<option>7.2</option>
<option>7.1</option>
<option>7.0</option>
<option selected>develop</option></select></div></div></nav><div class=page-wrapper><div class=page-content><div class=container-fluid><div class="col-xs-12 content-header"><ul class=social><li><a target=_blank title="Camunda on Twitter" href=//twitter.com/camunda><span class=cam-docs-twitter></span></a></li><li><a target=_blank title="Camunda related topics on Stackoverflow" href=//stackoverflow.com/questions/tagged/camunda><span class=cam-docs-stackoverflow></span></a></li><li><a target=_blank title="Camunda Forum" href=//forum.camunda.org><span class=cam-docs-chat></span></a></li></ul><div class=edit-on-github><a target=_blank href=https://github.com/camunda/camunda-docs-manual/tree/master/content/user-guide/process-engine/process-instance-migration.md><i>Edit on Github</i> <span class=cam-docs-github></span></a></div><h1 class=page-title>Process Instance Migration</h1></div><div class="col-xs-12 content-text"><p>Whenever a new version of a process definition is deployed, existing process instances that run
on previous versions are not affected. That means, the new process definition does not apply
to them automatically. If process instances are supposed to continue execution on a different process
definition, the <em>process instance migration</em> API can be employed.</p><p>Migration consists of two parts:</p><ol><li>Creating a <em>migration plan</em> that describes how process instances are to be migrated from one
process definition to another</li><li>Applying the migration plan to a set of process instances</li></ol><p>A migration plan consists of a set of <em>migration instructions</em> that in essence are mappings between
activities of the two process definitions. In particular, it maps an activity of the <em>source process definition</em>,
i.e., the definition process instances are migrated from, to an activity of the <em>target process definition</em>,
i.e., the definition process instances are migrated to. A migration instruction ensures that an instance of the source
activity is migrated into an instance of the target activity. A migration plan is complete when there are instructions for
all active source activities.</p><p>Migration instructions have the purpose to map semantically equivalent activities. In consequence, migration
interferes with activity instance state as little as possible which ensures a seamless transition.
For example, this means that a migrated user task instance is not re-assigned. From the assignee&rsquo;s point of view, migration
is mostly transparent, so that a task that was started before migration can be completed successfully after migration.
The same principle is applied to the other BPMN element types.</p><p>For cases in which activities are not semantically equivalent,
we recommend combining migration with the <a href=https://robertmastalerek.github.io/user-guide/process-engine/process-instance-modification/>process instance modification API</a>, e.g.,
canceling an activity instance before migration and starting a new instance after migration.</p><p>In the remainder of this section, the following process models are used to illustrate the API and effects of migration unless otherwise noted:</p><p>Process <code>exampleProcess:1</code>:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example1></div><p>Process <code>exampleProcess:2</code>:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example2></div><div class="note enterprise-feature"><h3>Enterprise Feature</h3><p class=description>The Camunda enterprise edition provides a user interface to migrate process instances in <a href=https://robertmastalerek.github.io/webapps/cockpit/bpmn/process-instance-migration/>Camunda Cockpit</a></p><p>Check the <a href=http://camunda.com/platform-7/editions/>Camunda enterprise homepage</a>
for more information or get your
<a href=https://camunda.com/download/enterprise/>free trial version.</a></p></div><h1 id=process-instance-migration-by-example>Process Instance Migration by Example</h1><p>We can define a migration plan using the API entrance point <code>RuntimeService#createMigrationPlan</code>.
It returns a fluent builder to create a migration plan. For our example, the code looks like:</p><pre><code class=language-java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapActivities(&quot;assessCreditWorthiness&quot;, &quot;assessCreditWorthiness&quot;)
  .mapActivities(&quot;validateAddress&quot;, &quot;validatePostalAddress&quot;)
  .mapActivities(&quot;archiveApplication&quot;, &quot;archiveApplication&quot;)
  .build();
</code></pre><p>The <code>mapActivities</code> invocations each specify a migration instruction and express that instances
of the first activity should become instances of the second activity.</p><p>Let us assume that we have a process instance in the following activity instance state:</p><pre><code>ProcessInstance
├── Archive Application
└── Assess Credit Worthiness
    └── Validate Address
</code></pre><p>In order to migrate this process instance according to the defined migration plan, the API method
<code>RuntimeService#newMigration</code> can be used:</p><pre><code class=language-java>MigrationPlan migrationPlan = ...;
List&lt;String&gt; processInstanceIds = ...;

runtimeService.newMigration(migrationPlan)
  .processInstanceIds(processInstanceIds)
  .execute();
</code></pre><p>The resulting activity instance state is:</p><pre><code>ProcessInstance
├── Handle Application Receipt
│   └── Archive Application
└── Assess Credit Worthiness
    └── Validate Postal Address
</code></pre><p>The following things have happened:</p><ul><li>An instance of the embedded subprocess <em>Handle Application Receipt</em> was added to reflect the new sub process in <code>exampleProcess:2</code></li><li>The activity instances for <em>Archive Application</em>, <em>Assess Credit Worthiness</em>, and <em>Validate Postal Address</em> have been migrated</li></ul><p>What does the second point mean in particular? Since there is a migration instruction for these activity instances they are
migrated. The entities that comprise this instance are updated to reference the new activity and process definition. Besides that, activity instances, task instances and
variable instances are preserved.</p><p>Before migration, there was a task instance
in the tasklist of an accountant to perform the <em>Validate Address</em> activity. After migration, the same task instance still exists and can be completed
successfully. It still has the same properties such as assignee or name.
From the accountant&rsquo;s perspective, migration is completely transparent while working on a task.</p><h1 id=api>API</h1><p>The following gives a structured overview of the Java API for process instance migration. Note that these operations are also available
via <a href=https://robertmastalerek.github.io/reference/rest/specification/#tag/Migration>REST</a>.</p><h2 id=creating-a-migration-plan>Creating a Migration Plan</h2><p>A migration plan can be created by using the API <code>RuntimeService#createMigrationPlan</code>.
It defines how migration should be performed.
A migration plan contains the IDs of the source and target process definition
as well as a list of migration instructions. A migration instruction is a mapping from activities in
the source process definition to activities in the target process definition.</p><p>For example, the following code creates a valid migration plan:</p><pre><code class=language-Java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapActivities(&quot;assessCreditWorthiness&quot;, &quot;assessCreditWorthiness&quot;)
  .mapActivities(&quot;validateAddress&quot;, &quot;validatePostalAddress&quot;)
  .build();
</code></pre><p>All activities can be mapped. Migration instructions must map between activities of the same type.</p><p>Supported activity relationships are:</p><ul><li>One-to-one relation</li></ul><p>A migration plan is <em>validated after creation</em> to detect migration
instructions that are not supported by the process engine. See the <a href=#creation-time-validation>chapter on
creation time validation</a> for details.</p><p>In addition, a migration plan is <em>validated before execution</em> to ensure that it can be applied to a specific process instance. For example,
migration instructions for some activity types are only supported for transition instances (i.e., active asynchronous continuations) but not for
activity instances. See the <a href=#execution-time-validation>chapter on execution time validation</a> for details.</p><div class="note bg-warning docs-warning"><h3>Validation Limitations</h3><p>The process engine can only validate that the process model can be migrated.
But there are other aspects the user has to care about. You can read more
about this in the section about <a href=#aspects-not-covered-by-validation>aspects not covered by
validation</a>.</p></div><h3 id=one-to-one-relation-instruction>One-to-One Relation Instruction</h3><pre><code class=language-java>MigrationPlanBuilder#mapActivities(String sourceActivityId, String targetActivityId)
</code></pre><p>Defining a one-to-one relation instruction means that an instance of the source activity
is migrated into an instance of the target activity. Activity instance, task instance and variable
instance state is preserved when migration is executed.</p><h3 id=updating-event-triggers>Updating Event Triggers</h3><p>When migrating events, it is possible to decide whether the corresponding event
triggers should be updated or not. See the <a href=#events>BPMN-specific considerations on
events</a> for details. When generating a migration
plan, it is possible to define this setting for generated instructions on
<a href=#user-task>User Tasks</a> containing <code>timeout</code> task listeners and
between events by using the method <code>updateEventTrigger</code>. For example,
the following code generates a migration instruction for a boundary event and
updates its event trigger during migration.</p><div class="note bg-info docs-info"><h3>Conditional Events</h3><p>For conditional events the <code>#updateEventTrigger</code> is mandatory.</p></div><pre><code class=language-java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapActivities(&quot;userTask&quot;, &quot;userTask&quot;)
  .mapActivities(&quot;boundary&quot;, &quot;boundary&quot;)
    .updateEventTrigger()
  .build();
</code></pre><h3 id=set-variables-to-process-instances>Set Variables to Process Instances</h3><p>Sometimes it is necessary to add variables after migrating the process instances to a new version
of the process definition. For example, when the new process model has a new input mapping which
requires a specific variable which isn&rsquo;t yet present in the migrated process instance. The variables
are set to the process instances&rsquo; scope.</p><p>Please see below how to call the Java API:</p><pre><code class=language-java>Map&lt;String, Object&gt; variables = Variables.putValue(&quot;my-variable&quot;, &quot;my-value&quot;);
MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .mapEqualActivities()
  .setVariables(variables)
  .build();
</code></pre><h4 id=known-limitation>Known Limitation</h4><p>Currently, it is not possible to set transient variables asynchronously. However,
you can <a href=https://robertmastalerek.github.io/user-guide/process-engine/variables/#transient-variables>set transient variables</a> synchronously.</p><h2 id=generating-a-migration-plan>Generating a migration plan</h2><p>In addition to manually specifying all migration instructions, the <code>MigrationPlanBuilder</code>
is able to generate migration instructions for all <em>equal</em> activities in the source
and target process definitions. This can reduce the effort for creating a migration
to only those activities that are not equal.</p><p>Equality of a pair of activities is defined as follows:</p><ul><li>They are of the same activity type</li><li>They have the same ID</li><li>They belong to the same scope, i.e., their parent BPMN scopes are equal according to this definition.
Process definitions are always equal.</li></ul><p>For example, consider the following code snippet:</p><pre><code class=language-Java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapEqualActivities()
  .mapActivities(&quot;validateAddress&quot;, &quot;validateProcessAddress&quot;)
  .build();
</code></pre><p>It creates generated migration instructions for the equal activities
<code>assessCreditWorthiness</code>. It adds an additional mapping from <code>validateAddress</code> to <code>validateProcessAddress</code>.</p><h3 id=updating-event-triggers-1>Updating Event Triggers</h3><p>Like for individual instructions, it is possible to specify the event trigger update flag
for generated migration instructions by using the <code>updateEventTriggers</code> method.
This is equal to calling <code>updateEventTrigger</code> on all event migration instructions
which are generated.</p><pre><code class=language-Java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapEqualActivities()
  .updateEventTriggers()
  .build();
</code></pre><h2 id=executing-a-migration-plan>Executing a migration plan</h2><p>Migration plans can be applied to a set of process instances of the source process
definition by using the API Method <code>RuntimeService#newMigration</code>.</p><p>The migration can either be executed synchronously (blocking) or asynchronously
(non-blocking) using a <a href=https://robertmastalerek.github.io/user-guide/process-engine/batch/>batch</a>.</p><p>The following are some reasons to prefer either one or the other:</p><ul><li><p>Use synchronous migration if:</p><ul><li>the number of process instances is small</li><li>the migration should be atomic, i.e., it should be executed
immediately and should fail if at least one process instance cannot
be migrated</li></ul></li><li><p>Use asynchronous migration if:</p><ul><li>the number of process instances is large</li><li>all process instances should be migrated decoupled from the other
instances, i.e., every instance is migrated in its own transaction</li><li>the migration should be executed by another thread, i.e., the job
executor should handle the execution</li></ul></li></ul><h3 id=selecting-process-instances-to-migrate>Selecting process instances to migrate</h3><p>Process instances can be selected for migration by either providing a set of process instance IDs
or providing a process instance query. It is also possible to specify both, a list of process instance IDs and a query.
The process instances to be migrated will then be the union of the resulting sets.</p><h4 id=list-of-process-instances>List of process instances</h4><p>The process instances which should be migrated by a migration plan can either
be specified as a list of the process instance IDs:</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;

List&lt;String&gt; processInstanceIds = ...;

runtimeService.newMigration(migrationPlan)
  .processInstanceIds(processInstanceIds)
  .execute();
</code></pre><p>For a static number of process instances, there is a convenience varargs method:</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;

ProcessInstance instance1 = ...;
ProcessInstance instance2 = ...;

runtimeService.newMigration(migrationPlan)
  .processInstanceIds(instance1.getId(), instance2.getId())
  .execute();
</code></pre><h4 id=process-instance-query>Process Instance Query</h4><p>If the instances are not known beforehand, the process instances can be selected by a process instance query:</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;

ProcessInstanceQuery processInstanceQuery = runtimeService
  .createProcessInstanceQuery()
  .processDefinitionId(migrationPlan.getSourceProcessDefinitionId());

runtimeService.newMigration(migrationPlan)
  .processInstanceQuery(processInstanceQuery)
  .execute();
</code></pre><h3 id=skipping-listeners-and-input-output-mappings>Skipping Listeners and Input/Output Mappings</h3><p>During migration, activity instances may end or new activity instances may emerge.
Per default, their activities&rsquo; execution listeners and input/output mappings
are going to be invoked as appropriate. This may not always be the desired behavior.</p><p>For example, if an execution listener expects the existence of a variable to function
properly but that variable does not exist in instances of the source process definition,
then skipping listener invocation can be useful.</p><p>In the API, the two methods <code>#skipCustomListeners</code> and <code>#skipIoMappings</code>
can be used for this purpose:</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;
List&lt;String&gt; processInstanceIds = ...;

runtimeService.newMigration(migrationPlan)
  .processInstanceIds(processInstanceIds)
  .skipCustomListeners()
  .skipIoMappings()
  .execute();
</code></pre><h3 id=synchronous-migration-execution>Synchronous migration execution</h3><p>To execute the migration synchronously, the <code>execute</code> method is used. It will
block until the migration is completed.</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;
List&lt;String&gt; processInstanceIds = ...;

runtimeService.newMigration(migrationPlan)
  .processInstanceIds(processInstanceIds)
  .execute();
</code></pre><p>Migration is successful if all process instances can be migrated. Confer the
<a href=#validation>chapter on validation</a> to learn which kind of validation is performed before
a migration plan is executed.</p><h3 id=asynchronous-batch-migration-execution>Asynchronous batch migration execution</h3><p>To execute the migration asynchronously, the <code>executeAsync</code> method is used. It will
return immediately with a reference to the batch which executes the migration.</p><pre><code class=language-Java>MigrationPlan migrationPlan = ...;
List&lt;String&gt; processInstanceIds = ...;

Batch batch = runtimeService.newMigration(migrationPlan)
  .processInstanceIds(processInstanceIds)
  .executeAsync();
</code></pre><p>Using a batch, the process instance migration is split into several jobs which
are executed asynchronously. These batch jobs are executed by the job executor.
See the <a href=https://robertmastalerek.github.io/user-guide/process-engine/batch/>batch</a> section for more information. A batch is completed if all
batch execution jobs are successfully completed. However, in contrast to the
synchronous migration, it is not guaranteed that either all or no process
instances are migrated. As the migration is split into several independent jobs,
every single job may fail or succeed.</p><p>If a migration job fails, it is retried by the job executor
and if no retries are left, an incident is created. In this case, manual action
is necessary to complete the batch migration: The job&rsquo;s retries can be incremented
or the job can be deleted. Deletion cancels migration of the specific instance but
does not affect the batch beyond that.</p><h4 id=batch-migration-in-a-heterogeneous-cluster>Batch migration in a heterogeneous cluster</h4><p>As described in the <a href=https://robertmastalerek.github.io/user-guide/process-engine/the-job-executor/#job-execution-in-heterogeneous-clusters>job executor</a> section of the user guide, the process engine
can be used in a heterogeneous cluster where deployments are unevenly distributed across cluster nodes.
The <em>deployment-aware</em> job executor only executes jobs for deployments registered with it.
In a heterogeneous cluster, this avoids problems with accessing deployment resources.</p><p>When executing a migration batch, the batch execution jobs are therefore restricted
to the job executor that has a registration for the deployment of the source
process definition. This introduces the requirement that
source and target deployment are registered with the same job executor or else
migration may fail when executing custom code (e.g., execution listeners) in the context
of the target process. Note that it is also possible to
<a href=#skipping-listeners-and-input-output-mappings>skip the execution of custom code</a>
during migration.</p><h1 id=bpmn-specific-api-and-effects>BPMN-specific API and Effects</h1><p>Depending on the type of the activities a process model contains, migration has varying effects.</p><h2 id=tasks>Tasks</h2><h3 id=user-task>User Task</h3><p>When a user task is migrated, all properties of the task instance (i.e., <code>org.camunda.bpm.engine.task.Task</code>) are preserved apart
from the process definition id and task definition key. The task is not reinitialized: Attributes like assignee or name do not change.</p><h4 id=timeout-task-listeners>Timeout Task Listeners</h4><p>User tasks with attached task listeners of event type <code>timeout</code> define persistent event triggers that can be updated or preserved during migration.
For the associated timers, the considerations of <a href=#events>catching events</a> apply here as well. On migration of the user task,
the following semantics are applied:</p><ul><li>If a timeout task listener is found in the source and target process definition based on its <code>id</code>, its persistent event trigger (i.e. timer) is migrated</li><li>If a timeout task listener in the source process definition is not found in the target definition based on its <code>id</code>, then its event trigger is deleted during migration</li><li>If a timeout task listener of the target definition is not the target of a migration instruction, then a new event trigger is initialized during migration</li></ul><h3 id=receive-task>Receive Task</h3><p>A receive task defines a persistent event trigger that can be updated or preserved during migration.
The considerations for <a href=#events>intermediate catch events</a> apply here as well.</p><h3 id=external-task>External Task</h3><p>When an active <a href=/user-guide/process-engine/external-tasks/>external task</a> is migrated, all properties of the external task instance (i.e., <code>org.camunda.bpm.engine.externaltask.ExternalTask</code>) are preserved
apart from activity id, process definition key, and process definition id. In particular, this means that attributes like topic and lock state do not change.</p><p>It is possible to map activities that are implemented as external tasks to each other even if they have different types. For example, an external send task can be mapped to an external service task.</p><h2 id=gateways>Gateways</h2><h3 id=inclusive-parallel-gateway>Inclusive &amp; Parallel Gateway</h3><p>Instances of inclusive and parallel gateways represent waiting tokens before the gateway is able to trigger.
They can be migrated to a gateway of the same type in the target process by supplying a migration instruction.</p><p>In addition, the following conditions must hold:</p><ul><li>The target gateway must have at least the same number of incoming sequence flows as the source gateway</li><li>There must be a valid migration instruction for the scope in which the gateway is contained in</li><li>At most one gateway of the source process definition can be mapped to every gateway in the target process definition</li></ul><h3 id=event-based-gateway>Event-based Gateway</h3><p>To migrate an event-based gateway instance, a migration instruction to another event-based gateway must be part of the migration plan.
In order to migrate the gateway&rsquo;s event triggers (event subscriptions, jobs), the events following to the gateway can be mapped as well.
See the <a href=#events>events section</a> for the semantics of instructions between events.</p><h2 id=events>Events</h2><p>For all kinds of catching events (start, intermediate, boundary), a migration instruction can be supplied if they define a persistent event
trigger. This is the case for message, conditional, timer, and signal events.</p><p>When mapping events, there are two configuration options:</p><ol><li><strong>The event trigger remains the same</strong>: Even if the target event defines a different trigger (e.g., changed timer configuration),
the migrated event instance is triggered according to the source definition. This is the default behavior
when calling <code>migrationBuilder.mapActivities(&quot;sourceTask&quot;, &quot;targetTask&quot;)</code></li><li><strong>The event trigger is updated</strong>: The migrated event instance is triggered according to the target definition.
This behavior can be specified by calling <code>migrationBuilder.mapActivities(&quot;sourceTask&quot;, &quot;targetTask&quot;).updateEventTrigger()</code></li></ol><div class="note bg-info docs-info"><h3>Timer Events</h3><p><p>Using <code>#updateEventTrigger</code> with a timer event does not take into account that a certain amount of time has already elapsed before migration.
In consequence, the event trigger is reset according to the target event.</p><p>Consider the following two processes where the configuration of the boundary event changes:</p><p>Process <code>timerBoundary:1</code>:</p><p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-boundary-timer1></div></p><p>Process <code>timerBoundary:2</code>:</p><p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-boundary-timer2></div></p><p>Specifying the instruction <code>migrationBuilder.mapActivities(&quot;timer&quot;, &quot;timer&quot;).updateEventTrigger()</code> is going to reinitialize the timer job.
In effect, the boundary event fires ten days after migration. In contrast, if <code>updateEventTrigger</code> is not used, then the
timer job configuration is preserved. In effect, it is going to trigger five days after the activity was started regardless of when the migration is performed.</p></p></div><div class="note bg-info docs-info"><h3>Conditional Events</h3><p>The usage of <code>#updateEventTrigger</code> is mandatory for migrating conditional events. The condition is overridden by the condition of the new conditional event.</p></div><h3 id=boundary-event>Boundary Event</h3><p>Boundary events can be mapped from the source to the target process definition along with the activity that they are attached to. The following applies:</p><ul><li>If a boundary event is mapped, its persistent event trigger (for timers, conditionals, messages, and signals) is migrated</li><li>If a boundary event in the source process definition is not mapped, then its event trigger is deleted during migration</li><li>If a boundary event of the target definition is not the target of a migration instruction, then a new event trigger is initialized during migration</li></ul><h3 id=start-event>Start Event</h3><p>Start events of event sub processes can be mapped from source to target with similar semantics as boundary events. In particular:</p><ul><li>If a start event is mapped, its persistent event trigger (for timers, conditionals, messages, and signals) is migrated</li><li>If a start event in the source process definition is not mapped, then its event trigger is deleted during migration</li><li>If a start event of the target definition is not the target of a migration instruction, then a new event trigger is initialized during migration</li></ul><h3 id=intermediate-catch-event>Intermediate Catch Event</h3><p>Intermediate catch events must be mapped if a process instance is waiting for that event during migration.</p><h3 id=compensation-event>Compensation Event</h3><h4 id=migrating-compensation-events>Migrating Compensation Events</h4><p>When migrating process instances with active compensation subscriptions, the following rules apply:</p><ul><li>The corresponding compensation catch events must be mapped</li><li>After migration, compensation can be triggered from the same migrated scope as before migration or its closest migrated ancestor</li><li>In order to preserve the variable snapshots of parent scopes, those scopes must be mapped as well.</li></ul><p>Process instances with active compensation subscriptions can be migrated by mapping the corresponding catching compensation events.
This tells the migration API which compensation handler of the source process model corresponds to which handler in the target process model.</p><p>Consider this source process:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation5></div><p>And this target process:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation6></div><p>Assume a process instance in the following state:</p><pre><code>ProcessInstance
└── Assess Credit Worthiness
</code></pre><p>The process instance has a compensation subscription for <em>Archive Application</em>. A valid migration plan must
therefore contain a mapping for the compensation boundary event. For example:</p><pre><code class=language-java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;compensationProcess:1&quot;, &quot;compensationProcess:2&quot;)
  .mapActivities(&quot;archiveApplication&quot;, &quot;archiveApplication&quot;)
  .mapActivities(&quot;compensationBoundary&quot;, &quot;compensationBoundary&quot;)
  .build();
</code></pre><p>After migration, compensation can be triggered from the same scope as before migration (or in case that scope is removed, the closest ancestor scope that migrates).
For illustration, consider the following source process:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation3></div><p>And this target process:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation4></div><p>When migrating the same process instance state as in the above example, the inner compensation event is <strong>not</strong> going to
trigger compensation of the <em>Archive Application</em> activity but only the outer compensation event.</p><div class="note bg-info docs-info"><h3>Active Compensation</h3><p>Migrating process instances with active compensation handlers is not supported yet.</p></div><h4 id=adding-compensation-events>Adding Compensation Events</h4><p>New compensation boundary events contained in the target process definition only take effect for activity instances that are not started or not finished yet.
For example, consider the following two processes:</p><p>Process <code>compensation:1</code>:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation1></div><p>Process <code>compensation:2</code>:</p><div data-bpmn-diagram=../bpmn/process-instance-migration/example-compensation2></div><p>Furthermore, assume that before migration a process instance is in the following state:</p><pre><code>ProcessInstance
└── Assess Credit Worthiness
</code></pre><p>If this process instance is migrated (with <em>Assess Credit Worthiness</em> being mapped to its equivalent), then triggering compensation
afterwards is <strong>not</strong> going to compensate <em>Archive Application</em>.</p><h2 id=subprocess>Subprocess</h2><p>If a migration instruction applies to an embedded/event/transaction sub process, it is migrated to its target sub process in the target process definition.
This preserves sub process state such as variables. In case no instruction applies, the instance is cancelled before migration is performed.
Should the target process definition contain new sub processes that no existing instance migrates to, then these are instantiated as needed during migration.</p><p>Embedded/Event/Transaction sub processes can be mapped interchangeably. For example, it is possible to map an embedded sub process to an event sub process.</p><h3 id=call-activity>Call Activity</h3><p>Call activities are migrated like any other activity. The called instance, be it a BPMN process or a CMMN case, is not changed. It can be migrated separately.</p><h2 id=flow-node-markers>Flow Node Markers</h2><h3 id=multi-instance>Multi-Instance</h3><p>Active multi-instance activities can be migrated if</p><ul><li>the target activity is multi-instance of the same type (parallel or sequential)</li><li>the target activity is not a multi-instance activity.</li></ul><h4 id=migrating-a-multi-instance-activity>Migrating a Multi-instance Activity</h4><p>When migrating instances of a multi-instance activity to another multi-instance activity, the migration plan needs to contain two instructions: One for the <em>inner activity</em>, i.e., the activity that has multi-instance loop characteristics. And another one for the <em>multi-instance body</em>. The body is a BPMN scope that contains the inner activity and that is not visually represented. By convention, it has the id <code>&lt;id of inner activity&gt;#multiInstanceBody</code>. When migrating a multi-instance body and its inner activity, the multi-instance state is preserved. That means, if a parallel multi-instance activity is migrated with two instances out of five being active, then the state is the same after migration.</p><h4 id=removing-a-multi-instance-marker>Removing a Multi-Instance Marker</h4><p>If the target activity is not a multi-instance activity, it is sufficient to have an instruction for the inner activity. During migration, the multi-instance variables <code>nrOfInstances</code>, <code>nrOfActiveInstances</code> and <code>nrOfCompletedInstances</code> are removed. The number of inner activity instances is preserved. That means, if there are two out of five active instances before migration, then there are going to be two instances of the target activity after migration. In addition, their <code>loopCounter</code> and collection element variables are kept.</p><h3 id=asynchronous-continuations>Asynchronous Continuations</h3><p>When an asynchronous continuation is active, i.e., the corresponding job has not been completed by the job executor yet, it is represented in the form of a <em>transition instance</em>. For example, this is the case when job execution failed and an incident has been created. For transition instances the mapping instructions apply just like for activity instances. That means, when there is an instruction from activity <code>userTask</code> to activity <code>newUserTask</code>, all transition instances that represent an asynchronous continuation before or after <code>userTask</code> are migrated to <code>newUserTask</code>. In order for this to succeed, the target activity must be asynchronous as well.</p><div class="note bg-warning docs-warning"><h3>Limitation with asyncAfter</h3><p>When migrating a transition instance that represents an asynchronous continuation <em>after</em> an activity, migration is only successful if the following limitations hold:</p><ul><li>If the source activity has no outgoing sequence flow, the target activity must not have more than one outgoing sequence flow</li><li>If the source activity has outgoing sequence flows, the target activity must have sequence flows with the same IDs or must have not more than one outgoing sequence flow. This also applies if the source activity has a single sequence flow.</li></ul></p></div><h1 id=operational-semantics>Operational Semantics</h1><p>In the following, the exact semantics of migration are documented. Reading this section is recommended to fully understand the effects, power, and limitations of process instance migration.</p><h2 id=migration-procedure>Migration Procedure</h2><p>Migration of a process instance follows these steps:</p><ol><li>Assignment of migration instructions to activity instances</li><li>Validation of the instruction assignment</li><li>Cancellation of unmapped activity instances and event handler entities</li><li>Migration of mapped activity instances and their dependent instances,
instantiation of newly introduced BPMN scopes, and handler creation for newly introduced events</li></ol><h3 id=assignment-of-migration-instructions>Assignment of Migration Instructions</h3><p>In the first step, migration instructions are assigned to activity instances
of a process instance that is going to be migrated.</p><h3 id=validation-of-instruction-assignment>Validation of Instruction Assignment</h3><p>The created assignment must be executable by the migration logic which is
ensured by the validation step. In particular, the following conditions must hold:</p><ul><li>Exactly one instruction must apply to a leaf activity instance (e.g., user task)</li><li>At most one instruction must apply to a non-leaf activity instance (e.g., embedded subprocess)</li><li>The overall assignment must be executable. See the <a href=#validation>validation chapter</a> for details.</li></ul><h3 id=cancellation-of-unmapped-activity-instances-and-event-handler-entities>Cancellation of Unmapped Activity Instances and Event-Handler Entities</h3><p>Non-leaf activity instances to which no migration instructions apply are cancelled. Event handler entities
(e.g., message event subscriptions or timer jobs) are removed when their BPMN elements (e.g., boundary events)
are not migrated. Cancellation is performed before any migration instruction is applied,
so the process instance is still in the pre-migration state.</p><p>The semantics are:</p><ul><li>The activity instance tree is traversed in a bottom-up fashion and unmapped instances are cancelled</li><li>Activity instance cancellation invokes the activity&rsquo;s end execution listeners and output variable mappings</li></ul><h3 id=migration-creation-of-activity-instances>Migration/Creation of Activity Instances</h3><p>Finally, activity instances are migrated and new ones are created as needed.</p><p>The semantics are:</p><ul><li>The activity instance tree is traversed in a top-down fashion</li><li>If an activity instance is migrated into a BPMN scope to which no parent activity instance
is migrated, then a new activity instance is created</li><li>Creation invokes the activity&rsquo;s start execution listeners and input variable mappings</li><li>An activity instance is migrated according to its assigned migration instruction</li></ul><h4 id=activity-instance-migration>Activity instance migration</h4><p>Migrating an activity instance updates the references to the activity and process definition
in the activity instance tree and its execution representation. Furthermore, it migrates or removes
<em>dependent</em> instances that belong to the activity instance. Dependent instances are:</p><ul><li>Variable instances</li><li>Task instances (for user tasks)</li><li>Event subscription instances</li></ul><h2 id=validation>Validation</h2><p>A migration plan is validated at two points in time: When it is created, its
instructions are validated for static aspects. When it is applied to a
process instance, its instructions are matched to activity instances
and this assignment is validated.</p><p>Validation ensures that none of the limitations stated in this guide lead
to an inconsistent process instance state with undefined behavior after migration.</p><h3 id=creation-time-validation>Creation Time Validation</h3><p>For an instruction to be valid when a migration plan is created, it has to fulfill
the following requirements:</p><ul><li>It has to map activities of the same type</li><li>It has to be a one-to-one mapping</li><li>A migrated activity must remain a descendant of its closest migrating ancestor scope (<strong>Hierarchy Preservation</strong>)</li><li>The migration plan adheres to <a href=#bpmn-specific-api-and-effects>BPMN-element-specific considerations</a></li><li>A set variable must not be of type <code>Object</code> <strong>AND</strong> its <code>serializationFormat</code> must not be <code>application/x-java-serialized-object</code><ul><li>Validation is skipped when the engine configuration flag <code>javaSerializationFormatEnabled</code> is set to <code>true</code></li><li>Please see <a href=https://robertmastalerek.github.io/reference/deployment-descriptors/tags/process-engine/#javaSerializationFormatEnabled>Process Engine Configuration Reference</a> for more details</li></ul></li></ul><p>If validation reports errors, migration fails with a <code>MigrationPlanValidationException</code>
providing a <code>MigrationPlanValidationReport</code> object with details on the
validation errors.</p><h4 id=hierarchy-preservation>Hierarchy Preservation</h4><p>An activity must stay a descendant of its closest ancestor scope that migrates (i.e., that is not cancelled during migration).</p><p>Consider the following migration plan for the example processes shown at the
<a href=https://robertmastalerek.github.io/user-guide/process-engine/process-instance-migration/>beginning of this chapter</a>:</p><pre><code class=language-java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapActivities(&quot;assessCreditWorthiness&quot;, &quot;handleApplicationReceipt&quot;)
  .mapActivities(&quot;validateAddress&quot;, &quot;validatePostalAddress&quot;)
  .build();
</code></pre><p>And a process instance in the following state:</p><pre><code>ProcessInstance
└── Assess Credit Worthiness
    └── Validate Address
</code></pre><p>The migration plan cannot be applied, because the
hierarchy preservation requirement is violated: The activity <em>Validate
Address</em> is supposed to be migrated to <em>Validate Postal Address</em>. However, the
parent scope <em>Assess Credit Worthiness</em> is migrated to <em>Handle
Application Receipt</em>, which does not contain <em>Validate Postal Address</em>.</p><h3 id=execution-time-validation>Execution Time Validation</h3><p>When a migration plan is applied to a process instance, it is validated beforehand
that the plan is applicable. In particular, the following aspects are checked:</p><ul><li><strong>Completeness</strong>: There must be a migration instruction for every instance of leaf activities
(i.e., activities that do not contain other activities)</li><li><strong>Instruction Applicability</strong>: For certain activity types, only transition instances but not
activity instances can be migrated</li></ul><p>If validation reports errors, migration fails with a <code>MigratingProcessInstanceValidationException</code>
providing a <code>MigratingProcessInstanceValidationReport</code> object with details on the
validation errors.</p><h4 id=completeness>Completeness</h4><p>Migration is only meaningful if a migration instruction applies to every instance of a leaf activity. Assume a migration plan as follows:</p><pre><code class=language-java>MigrationPlan migrationPlan = processEngine.getRuntimeService()
  .createMigrationPlan(&quot;exampleProcess:1&quot;, &quot;exampleProcess:2&quot;)
  .mapActivities(&quot;archiveApplication&quot;, &quot;archiveApplication&quot;)
  .build();
</code></pre><p>Now consider a process instance in the following activity instance state:</p><pre><code>ProcessInstance
└── Archive Application
</code></pre><p>The plan is complete with respect to this process instance because there is a migration instruction for the activity <em>Archive Application</em>.</p><p>Now consider another process instance:</p><pre><code>ProcessInstance
├── Archive Application
└── Assess Credit Worthiness
    └── Validate Address
</code></pre><p>The migration plan is not valid with respect to this instance because there is no instruction that applies to the instance of <em>Validate Address</em>.</p><h4 id=instruction-applicability>Instruction Applicability</h4><p>Migration instructions are used to migrate activity instances as well as transition instances (i.e., active asynchronous continuations). Some
instructions can only be used to migrate transition instances but not activity instances. In general, activity instances can only be
migrated if they are instances of the following element types:</p><ul><li>Task<ul><li>User Task</li><li>Receive Task</li><li>External Task</li></ul></li><li>Subprocess<ul><li>Embedded Sub Process</li><li>Event Sub Process</li><li>Transaction Sub Process</li><li>Call Activity</li></ul></li><li>Gateways<ul><li>Parallel Gateway</li><li>Inclusive Gateway</li><li>Event-based Gateway</li></ul></li><li>Events<ul><li>Boundary Event</li><li>Intermediate Catch Event</li></ul></li><li>Misc<ul><li>Multi-instance Body</li></ul></li></ul><p>Transition instances can be migrated for any activity type.</p><h3 id=aspects-not-covered-by-validation>Aspects Not Covered by Validation</h3><h4 id=data-consistency>Data Consistency</h4><p>Process instances contain data such as variables that are specific to how a process is implemented.
Validation cannot ensure that such data is useful in the context of the target process definition.</p><h4 id=deserialization-of-object-variables>Deserialization of Object Variables</h4><p><a href=https://robertmastalerek.github.io/user-guide/process-engine/variables/#supported-variable-values>Object type variables</a> represent Java objects. That means they have a serialized value along with a Java type name that is used to deserialize the value into a Java object. When migrating between processes of different process
applications, it may occur that an Object variable refers to a Java class that does not exist in the process
application of the target process.</p><p>This scenario is not prevented by validation. Accessing the deserialized value may therefore fail after migration.
If you end up with unusable Object variables, there are two ways to deal with
that situation:</p><ul><li>Add the missing classes to the target process application</li><li>Convert the inconsistent variable into a variable for which the Java class is present based on its serialized value</li></ul></div></div></div><div class=page-toc><h3>On this Page:</h3><nav id=TableOfContents><ul><li><a href=#process-instance-migration-by-example>Process Instance Migration by Example</a></li><li><a href=#api>API</a><ul><li><a href=#creating-a-migration-plan>Creating a Migration Plan</a><ul><li><a href=#one-to-one-relation-instruction>One-to-One Relation Instruction</a></li><li><a href=#updating-event-triggers>Updating Event Triggers</a></li><li><a href=#set-variables-to-process-instances>Set Variables to Process Instances</a><ul><li><a href=#known-limitation>Known Limitation</a></li></ul></li></ul></li><li><a href=#generating-a-migration-plan>Generating a migration plan</a><ul><li><a href=#updating-event-triggers-1>Updating Event Triggers</a></li></ul></li><li><a href=#executing-a-migration-plan>Executing a migration plan</a><ul><li><a href=#selecting-process-instances-to-migrate>Selecting process instances to migrate</a><ul><li><a href=#list-of-process-instances>List of process instances</a></li><li><a href=#process-instance-query>Process Instance Query</a></li></ul></li><li><a href=#skipping-listeners-and-input-output-mappings>Skipping Listeners and Input/Output Mappings</a></li><li><a href=#synchronous-migration-execution>Synchronous migration execution</a></li><li><a href=#asynchronous-batch-migration-execution>Asynchronous batch migration execution</a><ul><li><a href=#batch-migration-in-a-heterogeneous-cluster>Batch migration in a heterogeneous cluster</a></li></ul></li></ul></li></ul></li><li><a href=#bpmn-specific-api-and-effects>BPMN-specific API and Effects</a><ul><li><a href=#tasks>Tasks</a><ul><li><a href=#user-task>User Task</a><ul><li><a href=#timeout-task-listeners>Timeout Task Listeners</a></li></ul></li><li><a href=#receive-task>Receive Task</a></li><li><a href=#external-task>External Task</a></li></ul></li><li><a href=#gateways>Gateways</a><ul><li><a href=#inclusive-parallel-gateway>Inclusive &amp; Parallel Gateway</a></li><li><a href=#event-based-gateway>Event-based Gateway</a></li></ul></li><li><a href=#events>Events</a><ul><li><a href=#boundary-event>Boundary Event</a></li><li><a href=#start-event>Start Event</a></li><li><a href=#intermediate-catch-event>Intermediate Catch Event</a></li><li><a href=#compensation-event>Compensation Event</a><ul><li><a href=#migrating-compensation-events>Migrating Compensation Events</a></li><li><a href=#adding-compensation-events>Adding Compensation Events</a></li></ul></li></ul></li><li><a href=#subprocess>Subprocess</a><ul><li><a href=#call-activity>Call Activity</a></li></ul></li><li><a href=#flow-node-markers>Flow Node Markers</a><ul><li><a href=#multi-instance>Multi-Instance</a><ul><li><a href=#migrating-a-multi-instance-activity>Migrating a Multi-instance Activity</a></li><li><a href=#removing-a-multi-instance-marker>Removing a Multi-Instance Marker</a></li></ul></li><li><a href=#asynchronous-continuations>Asynchronous Continuations</a></li></ul></li></ul></li><li><a href=#operational-semantics>Operational Semantics</a><ul><li><a href=#migration-procedure>Migration Procedure</a><ul><li><a href=#assignment-of-migration-instructions>Assignment of Migration Instructions</a></li><li><a href=#validation-of-instruction-assignment>Validation of Instruction Assignment</a></li><li><a href=#cancellation-of-unmapped-activity-instances-and-event-handler-entities>Cancellation of Unmapped Activity Instances and Event-Handler Entities</a></li><li><a href=#migration-creation-of-activity-instances>Migration/Creation of Activity Instances</a><ul><li><a href=#activity-instance-migration>Activity instance migration</a></li></ul></li></ul></li><li><a href=#validation>Validation</a><ul><li><a href=#creation-time-validation>Creation Time Validation</a><ul><li><a href=#hierarchy-preservation>Hierarchy Preservation</a></li></ul></li><li><a href=#execution-time-validation>Execution Time Validation</a><ul><li><a href=#completeness>Completeness</a></li><li><a href=#instruction-applicability>Instruction Applicability</a></li></ul></li><li><a href=#aspects-not-covered-by-validation>Aspects Not Covered by Validation</a><ul><li><a href=#data-consistency>Data Consistency</a></li><li><a href=#deserialization-of-object-variables>Deserialization of Object Variables</a></li></ul></li></ul></li></ul></li></ul></nav><div class=docs-banner style=display:none><blockquote><p>We are looking for talented people.</p><p>Check out our <a href=https://camunda.com/career/>open positions</a>.</p></blockquote></div></div><footer class=page-footer><div class=row><div class=col-xs-12><p class=pull-right><a href=# target=_self>Back to top</a></p><p><a href=http://camunda.org>camunda.org</a> and <a href=https://robertmastalerek.github.io/>docs.camunda.org</a> are both part of Camunda
<span class=splitter>|</span>
Built by <a href=http://www.camunda.com>camunda</a> and contributors &mdash; <a href=https://camunda.com/legal/privacy/>Privacy Statement</a> &mdash; camunda Services GmbH &copy; 2025</p><p><a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/><img alt="Creative Commons License" style=border-width:0 src=https://i.creativecommons.org/l/by-sa/3.0/80x15.png></a> The content on this site is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/3.0/>Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p></div></div></footer></div><script type=text/javascript src=https://robertmastalerek.github.io/js/docs.5475e58434acb556d620a23530a5e7d810d99614ce0019dfc36d72ba6700b3c9.js integrity="sha256-VHXlhDSstVbWIKI1MKXn2BDZlhTOABnfw21yumcAs8k="></script><script type=text/javascript>var _gaq=_gaq||[];var pluginUrl='//www.google-analytics.com/plugins/ga/inpage_linkid.js';_gaq.push(['_require','inpage_linkid',pluginUrl]);_gaq.push(['_setAccount','UA-39060941-1']);_gaq.push(['_setDomainName','camunda.org']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script><script type=text/javascript id=hs-script-loader async defer src=//js.hs-scripts.com/4513465.js></script></body></html>